## 配置项 与 HTML

一个九宫格运行起来有诸多参数，比如 起始位置，终止位置，圈数等等。这些参数尽可能的职责要单一。我看过一个类似的 luckdraw 代码。它给了挺多的配置项，比如结束时间，转动圈数，速度等等，但是殊不知结束时间与转动速度和转动圈数正相关，这个结束时间配置项毫无意义，甚至还能导致一些 bug。

说的专业一点就是在写代码之前定义数据结构。就拿这个九宫格来说，我之前的 DOM 结构其实类似与一个二维数组，后来发现实现起来麻烦。（HTML 结构就是前端的数据结构），后改为一维。

## setTimeout vs setInterval

setTimeout 相对于 setInterval 来说，更加的灵活。使用 setTimeout 相当于你在一帧一帧的 编辑动画，给予了你开发很高的灵活度

## 闭包

一开始我将定时器的返回值作为配置项，（即将定时器的返回值保存下来），但是想了一下，没有必要，定时器是在函数运行过程中的产生的值，对九宫格动画没有一点点的影响。不需要将其添在配置里面，不如使用闭包，让定时器在函数运行过程中始终存在。

## 速度

一开始，速度是通过转的圈数来控制的，但是这样有一个缺点，就是不灵活。一圈才看出速度的变化。配置项里有一个`cnt`的参数，用于记录函数运行的次数。该值由－１一直递增，有点像高中数学函数的 x 轴，那么不如写一个数学函数,其函数图像在[-1,10000]是先增后减的。ｙ值当做速度。需要调整速度的时候，我们修改该函数式即可。笔者选用了二次函数

## 继续点击

当然，九宫格抽奖点击完成之后肯定是可以继续点击的，所以，为了完成这一需求，又引入了变量`isFinished`,`onlyRunOnce`。用于控制 init 的触发。
